#!/usr/bin/env node

require("babel/register");
var argv = require('minimist')(process.argv);
var Agent = require('../src/agent').Agent;
var Config = require('../src/config');

var aa = {
  shipId: process.env.HULL_SHIP_ID,
  orgUrl: process.env.HULL_ORG_URL,
  secret: process.env.SECRET
};

Config.getShipConfig(aa.orgUrl, aa.shipId, aa.secret).then(function(config) {
  var a = new Agent(config)
  a.connect().then(function(conn) {
    console.log('connection ok : ');

    conn.sobject("Account").describe(function(err, meta) {
      if (err) { return console.error(err); }
      console.log('Label : ' + meta.label);
      console.log('Num of Fields : ' + meta.fields.length);
      console.warn(JSON.stringify(meta));
      // ...
    });
  }, function(err) {
    console.error('Oops', err);
  });
})
